######### é”šç‚¹ start #######
#è¿™é‡Œæ˜¯è®¢é˜…æ›´æ–°å’Œå»¶è¿Ÿæµ‹è¯•ç›¸å…³çš„
p: &p {type: http, interval: 86400, health-check: {enable: true, url: "https://www.gstatic.com/generate_204", interval: 3600}, header: {User-Agent: [mihomo/1.18.9 NekoBox/4.0 (Prefer ClashMeta Format)]}}
######### é”šç‚¹ end #######

#  è®¢é˜…é“¾æŽ¥
proxy-providers:  
  provider1:
    <<: *p
    url: "https://example.com"
    path: ./proxies/example.yaml

mode: rule
ipv6: true
allow-lan: false
log-level: info
mixed-port: 7890
external-controller: 127.0.0.1:9090
tcp-concurrent: true
global-client-fingerprint: chrome
profile:
  store-selected: true
  store-fake-ip: true
dns:
  enable: true
  ipv6: true
  prefer-h3: true
  listen: :1053
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter-mode: whitelist
  fake-ip-filter:
    - 'rule-set:openai,abema,proxy'
  nameserver:
    - 'https://dns.google/dns-query#ðŸš€ èŠ‚ç‚¹é€‰æ‹©&ecs=175.1.0.0/16&ecs-override=true'
  nameserver-policy:
    'rule-set:ads': rcode://name_error
    'rule-set:private,cn':
      - system
      - 223.6.6.6
      - 114.114.114.114
  proxy-server-nameserver:
    - quic://dns.alidns.com
    - quic://dns.nextdns.io

proxy-groups:

  - {name: ðŸš€ èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, âš¡ ä¸“ç”¨çº¿è·¯, ðŸ”® è´Ÿè½½å‡è¡¡, ðŸŒ€ï¸ UDPèŠ‚ç‚¹, ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ðŸ‡¹ðŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ðŸ‡°ðŸ‡· éŸ©å›½èŠ‚ç‚¹, ðŸ‡ºðŸ‡¸ ç¾Žå›½èŠ‚ç‚¹, DIRECT]}
  
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, tolerance: 25, include-all-providers: true, exclude-filter: "(?i)å¥—é¤|æµé‡|å‰©ä½™|å®˜ç½‘"}  
  
  - {name: âš¡ ä¸“ç”¨çº¿è·¯, type: select, use: [è‡ªå»º]}
  
  - {name: ðŸ¤– OpenAI, type: url-test, use: [è§£é”]}

  - {name: ðŸ“º AbemaTV, type: url-test, use: [è§£é”]}

  - {name: ðŸ”® è´Ÿè½½å‡è¡¡, type: load-balance, strategy: consistent-hashing, use: [è‡ªå»º], filter: "(?i)HK"}

  - {name: ðŸŽ¯ å…¨çƒç›´è¿ž, type: select, proxies: [DIRECT, ðŸš€ èŠ‚ç‚¹é€‰æ‹©]}

  - {name: ðŸ›‘ å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT, DIRECT]}

  - {name: ðŸŸ æ¼ç½‘ä¹‹é±¼, type: select, proxies: [ðŸš€ èŠ‚ç‚¹é€‰æ‹©, ðŸŽ¯ å…¨çƒç›´è¿ž]}

  #åˆ†éš”,ä¸‹é¢æ˜¯è‡ªå®šä¹‰åˆ†ç»„

  - {name: ðŸŒ€ï¸ UDPèŠ‚ç‚¹, type: url-test, tolerance: 25, include-all-providers: true, exclude-type: "Http|Socks5|Shadowsocks|ShadowsocksR|Vmess|Vless|Trojan"}
  
  - {name: ðŸ‡¯ðŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, type: url-test, tolerance: 25, include-all-providers: true, filter: "(?i)æ—¥æœ¬|ä¸œäº¬|Japan|JP|ðŸ‡¯ðŸ‡µ"}

  - {name: ðŸ‡¹ðŸ‡¼ å°æ¹¾èŠ‚ç‚¹, type: url-test, tolerance: 25, include-all-providers: true, filter: "(?i)å°|è‡º|Taiwan|TW|ðŸ‡¹ðŸ‡¼"}

  - {name: ðŸ‡°ðŸ‡· éŸ©å›½èŠ‚ç‚¹, type: url-test, tolerance: 25, include-all-providers: true, filter: "(?i)éŸ©|éŸ“|é¦–å°”|æ˜¥å·|Korea|KR|ðŸ‡°ðŸ‡·"}

  - {name: ðŸ‡ºðŸ‡¸ ç¾Žå›½èŠ‚ç‚¹, type: url-test, tolerance: 25, include-all-providers: true, filter: "(?i)ç¾Ž|America|US|ðŸ‡ºðŸ‡¸"}

rule-providers:
  private:
    type: http
    behavior: domain
    format: mrs
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/private.mrs"
    path: ./ruleset/private.mrs
    interval: 86400

  ads:
    type: http
    behavior: domain
    format: mrs
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/ads.mrs"
    path: ./ruleset/ads.mrs
    interval: 86400

  openai:
    type: http
    behavior: classical
    format: yaml
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI_No_Resolve.yaml"
    path: ./ruleset/openai.yaml
    interval: 86400
    
  abema:
    type: http
    behavior: classical
    format: yaml
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AbemaTV/AbemaTV_No_Resolve.yaml"
    path: ./ruleset/abema.yaml
    interval: 86400
    
  proxy:
    type: http
    behavior: domain
    format: mrs
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/proxy.mrs"
    path: ./ruleset/proxy.mrs
    interval: 86400

  cn:
    type: http
    behavior: domain
    format: mrs
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/cn.mrs"
    path: ./ruleset/cn.mrs
    interval: 86400

  telegramip:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/telegramip.mrs"
    path: ./ruleset/telegramip.mrs
    interval: 86400

  privateip:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/privateip.mrs"
    path: ./ruleset/privateip.mrs
    interval: 86400

  cnip:
    type: http
    behavior: ipcidr
    format: mrs
    url: "https://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash-ruleset/cnip.mrs"
    path: ./ruleset/cnip.mrs
    interval: 86400
    
rules:
  - RULE-SET,private,ðŸŽ¯ å…¨çƒç›´è¿ž
  - RULE-SET,ads,ðŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,openai,ðŸ¤– OpenAI
  - RULE-SET,abema,ðŸ“º AbemaTV
  - RULE-SET,proxy,ðŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,telegramip,ðŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,privateip,ðŸŽ¯ å…¨çƒç›´è¿ž
  - RULE-SET,cnip,ðŸŽ¯ å…¨çƒç›´è¿ž
  - MATCH,ðŸŸ æ¼ç½‘ä¹‹é±¼
